![](https://github.com/luvletterldl/the-last-naruto/raw/main/public/logo.webp)

## æ‘˜è¦

[the-last-naruto](https://github.com/luvletterldl/the-last-naruto)æ˜¯ä¸€ä¸ªåŸºäº[Vue@2.7](https://github.com/vuejs/vue)å’Œ[Vite@3](https://github.com/vitejs/vite)çš„ä¸€ä¸ªé¡¹ç›®æ¨¡æ¿(æ”¯æŒ`IE11`æµè§ˆå™¨)ï¼Œçµæ„Ÿæ¥æºè‡ª`antfu`å¤§ä½¬çš„[vitesse-lite](https://github.com/antfu/vitesse-lite)ã€‚æ—¨åœ¨ç»™é¡¹ç›®ä¸Šè¿˜éœ€è¦æ”¯æŒ`IE11`æµè§ˆå™¨çš„ä¸€äº›åŒå­¦æä¾›è¿‘ä¼¼`Vue3`ç”Ÿæ€çš„å¼€å‘ä½“éªŒã€‚

## å‰è¨€

ä¼—æ‰€å‘¨çŸ¥ï¼Œç”±äº`Vue3`ä¸­çš„å“åº”å¼ç³»ç»Ÿæ˜¯åŸºäº`proxy`æ¥æ„å»ºçš„ï¼Œå¯¼è‡´éœ€è¦å…¼å®¹`IE`å’Œä½ç‰ˆæœ¬æµè§ˆå™¨çš„é¡¹ç›®æ— æ³•å‡çº§åˆ°`Vue3`ã€‚æœ‰äº›åŒå­¦åˆæƒ³å°è¯•ç”¨æ–°çš„**ç»„åˆå¼api**æ¥ç»„ç»‡ä»£ç ï¼Œè¿˜éœ€è¦å€ŸåŠ©äº[@vue/composition-api](https://github.com/vuejs/composition-api)è¿™ä¸ªæ’ä»¶çš„åŠ›é‡ï¼Œè™½ç„¶ä¹Ÿå°†å°±èƒ½ç”¨ï¼Œä½†æ˜¯`ts`ä¸å‹å¥½å’Œç¼ºå°‘`setup`è¯­æ³•ç³–çš„å¢ƒå†µè¿˜æ˜¯ä»¤äººæ²®ä¸§ğŸ˜¢ã€‚

ç›´åˆ°é‚£ä¸ªç”·äººåœ¨**2022å¹´7æœˆ1æ—¥**å‘å¸ƒäº†ä»£å·ä¸º`Naruto`çš„`Vue2.7`ã€‚å–œå¤§æ™®å¥”ï¼Œå’±ä»¬ç»ˆäºèƒ½åœ¨`Vue2`é‡Œé¢ç”¨ä¸Š**ç»„åˆå¼api**å’Œ`setup`äº†ï¼Œè¿˜æœ‰å®Œå¤‡çš„`ts`æ”¯æŒğŸ’ªã€‚å½“æ—¶ä»”ç»†çœ‹äº†[release blog](https://blog.vuejs.org/posts/vue-2-7-naruto.html)ï¼Œå‘ç°é™¤äº†å¯ä»¥ç”¨`Vue CLI / webpack`èµ·é¡¹ç›®ï¼Œç«Ÿç„¶è¿`Vite`ä¹Ÿæ”¯æŒäº†ï¼æ¿€åŠ¨çš„ğŸ’•ï¼Œé¢¤æŠ–çš„ğŸ™Œï¼Œå€ŸåŠ©[vite-plugin-vue2](https://github.com/vitejs/vite-plugin-vue2)å°±å¯ä»¥ç”¨`Vite`æ”¯æŒæˆ‘ä»¬å¼€å‘`vue2.7`çš„é¡¹ç›®äº†ï¼Œé‰´äºä¹‹å‰ç”¨è¿‡`antfu`å¤§ä½¬`vitesse-lite`å†™è¿‡é¡¹ç›®ï¼Œè§‰å¾—éå¸¸å¥½ç”¨ï¼Œäºæ˜¯æˆ‘å°±æƒ³èƒ½æ—¢ç„¶`Vue2.7`å‡ºæ¥äº†ï¼Œ`vite`ä¹Ÿæ”¯æŒäº†ï¼Œèƒ½ä¸èƒ½è®©`Vue2.7`çš„é¡¹ç›®çš„å¼€å‘ä½“éªŒæœ`Vue3`é é½ï¼Œæ¯•ç«Ÿå¤©ä¸‹è‹¦`webpack`ä¹…çŸ£ï¼Œæ‰€ä»¥`the-last-naruto`å°±è¯ç”Ÿäº†ã€‚

## ç‰¹æ€§

### å®Œå–„çš„`TypeScript`å’Œ`<script setup>`è¯­æ³•ç³–

`Vue2.7`ç›´æ¥å®Œç¾æ”¯æŒï¼

### VueUse

**å¼€ç®±å³ç”¨ï¼**

### æ”¯æŒä½¿ç”¨`Vite`å¼€å‘å’Œæ‰“åŒ…
ä¼´éš`Vue2.7`çš„`release`ï¼Œ`Vue`å®˜æ–¹ä¹Ÿæä¾›äº†å¯¹åº”çš„`Vite`æ’ä»¶[vite-plugin-vue2](https://github.com/vitejs/vite-plugin-vue2)ã€‚ç»™ä¸èƒ½å‡çº§åˆ°`Vue@3`ç‰ˆæœ¬çš„å¼€å‘è€…æä¾›äº†å¤§åŠ›çš„æ”¯æŒï¼å…·ä½“é…ç½®[å‚è€ƒ](https://github.com/underfin/vite-plugin-vue2#install)ã€‚

### é…ç½®æ‰“åŒ…äº§ç‰©æ”¯æŒ`IE11`

`Vite`çš„é»˜è®¤æµè§ˆå™¨æ”¯æŒåŸºçº¿æ˜¯`åŸç”ŸESM`ä¹Ÿå°±æ˜¯[es6-module](https://caniuse.com/es6-module)ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨`Vite`å®˜æ–¹æä¾›çš„ä¸€ä¸ªæ’ä»¶[@vitejs/plugin-legacy](https://github.com/vitejs/vite/tree/main/packages/plugin-legacy)æ¥ä¸ºæ‰“åŒ…åçš„æ–‡ä»¶æä¾›ä¼ ç»Ÿæµè§ˆå™¨å…¼å®¹æ€§æ”¯æŒã€‚å…·ä½“é…ç½®[å‚è€ƒ](https://github.com/luvletterldl/the-last-naruto/blob/main/vite.config.ts#L38)ã€‚

### æ–‡ä»¶è·¯ç”±

çŸ¥é“`Nuxtjs`çš„è·¯ç”±ç³»ç»Ÿçš„åº”è¯¥éƒ½äº†è§£è¿™ç§è·¯ç”±ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼Œä¸ç”¨æ‰‹åŠ¨é…ç½®è·¯ç”±ï¼ŒåŸºäºæ–‡ä»¶å¤¹å±‚çº§å’Œæ–‡ä»¶åè‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±ç³»ç»Ÿï¼Œå¹¶ä¸”ä¹Ÿæ”¯æŒåŠ¨æ€è·¯ç”±ï¼Œéå¸¸æ–¹ä¾¿ã€‚åœ¨`vitesse-lite`ä¸­æˆ‘çŸ¥é“äº†è¿™ä¹ˆä¸€ä¸ªæ’ä»¶[vite-plugin-pages](https://github.com/hannoeru/vite-plugin-pages)ï¼Œè™½è¯´è¿™ä¸ªæ’ä»¶çš„æ–‡æ¡£ä¸­è¯´è‡ªå·±æ˜¯æ”¯æŒ`Vue 3 / React`åº”ç”¨çš„æ–‡ä»¶è·¯ç”±ç³»ç»Ÿï¼Œä½†æ˜¯ç»è¿‡æˆ‘çš„å°è¯•ï¼Œä¸å‡ºæ„å¤–çš„`vue@2.7`é…åˆ`vue-router@3.5.4`é…ç½®ç¨ä½œæ”¹åŠ¨ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼Œå…·ä½“é…ç½®[å‚è€ƒ](https://github.com/luvletterldl/the-last-naruto/blob/main/src/main.ts#L12)ã€‚

### ç»„ä»¶è‡ªåŠ¨å¯¼å…¥

äº†è§£`Vue3`å’Œ`Vite`ç”Ÿæ€çš„åº”è¯¥éƒ½çŸ¥é“`antfu`å¤§ä½¬çš„ä¸€ä¸ªå¾ˆæœ‰åä¹Ÿå¾ˆå¥½ç”¨çš„æ’ä»¶[unplugin-vue-components](https://github.com/antfu/unplugin-vue-components)ï¼Œä¹‹å‰çš„å¼€å‘ä¸­æˆ‘ä»¬è¦ä½¿ç”¨å°è£…å¥½çš„ç»„ä»¶ï¼Œéƒ½è¦å¼•å…¥ç»„ä»¶ï¼Œå¹¶åœ¨`components`ä¸­å£°æ˜ï¼Œå½“æˆ‘ä»¬çš„é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿™ç§ä»£ç ä¼šè¶Šæ¥è¶Šå¤šï¼Œå¯¼è‡´ä»£ç å¯è¯»æ€§ä¸‹é™ï¼Œæˆ‘ä»¬ä½¿ç”¨`unplugin-vue-components`æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ç»„ä»¶ç›´æ¥åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ä½¿ç”¨å³å¯ï¼Œä¸éœ€è¦å¯¼å…¥ä¸éœ€è¦å£°æ˜ï¼Œå…·ä½“é…ç½®[å‚è€ƒ](https://github.com/luvletterldl/the-last-naruto/blob/main/vite.config.ts#L34)

### ç»„åˆå¼Apiè‡ªåŠ¨å¯¼å…¥

è·Ÿä¸Šé¢ç»„ä»¶å¯¼å…¥çš„ç—›ç‚¹ç±»ä¼¼ï¼Œä¹‹å‰æˆ‘ä»¬åœ¨ä½¿ç”¨**ç»„åˆå¼api**å’Œ`VueUse`ä¸­æä¾›çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç é€»è¾‘çš„æ—¶å€™è¿˜æ˜¯æ‰‹åŠ¨å¼•å…¥ç±»ä¼¼`ref`ã€`reactive`ã€`onMounted`ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨[unplugin-auto-import](https://github.com/antfu/unplugin-auto-import)æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼Œåˆ«é—®ï¼Œé—®å°±æ˜¯è¿˜æ˜¯`antfu`å¤§ä½¬çš„åº“ğŸ˜‚ï¼Œå…·ä½“é…ç½®[å‚è€ƒ](https://github.com/luvletterldl/the-last-naruto/blob/main/vite.config.ts#L26)ã€‚

### UnoCSS

ç”¨è¿‡`tailwindcss`ã€`windicss`æˆ–è€…ç”¨è¿‡`vitesse-lite`æ¨¡æ¿çš„éƒ½å¤§æ¦‚çŸ¥é“`UnoCSS`çš„èƒ½åŠ›æ€æ ·ï¼Œè°ç”¨è°çŸ¥é“ï¼ğŸ¤”æˆ‘ä»¬å€ŸåŠ©`Vite`çš„èƒ½åŠ›ï¼ŒåŒæ ·çš„å¯ä»¥åœ¨`Vue2.7`çš„é¡¹ç›®ä¸­ä½¿ç”¨å¼ºå¤§çš„ã€é«˜æ€§èƒ½çš„ã€é«˜çµæ´»æ€§çš„`UnoCSS`ã€‚ç»™ä½ ä¸ªçœ¼ç¥è‡ªå·±ä½“ä¼šï¼Œè¿˜æ˜¯`antfu`å¤§ä½¬çš„åº“ğŸ˜œï¼Œå…·ä½“é…ç½®[å‚è€ƒ](https://github.com/luvletterldl/the-last-naruto/blob/main/vite.config.ts#L44)ã€‚

### çº¯CSSçš„å›¾æ ‡ï¼ˆèƒ½åŠ›åœ¨IE11ä¸Šéƒ¨åˆ†æ”¯æŒï¼‰

ååˆ†ä¸å¥½æ„æ€å„ä½ï¼Œç”±äº`antfu`å¤§ä½¬çš„[icons-in-pure-css](https://antfu.me/posts/icons-in-pure-css#colorable)æ–¹æ¡ˆä¸­ä½¿ç”¨äº†`IE11`ä¸æ”¯æŒçš„`CSS`èƒ½åŠ›ï¼š`IE11`ä¸­æ— æ³•æ”¯æŒ[CSS Masks](https://caniuse.com/?search=mask)å’Œ[CSS property: mask-image](https://caniuse.com/?search=mask-image)ï¼Œæ‰€ä»¥è¿™ä¸ªèƒ½åŠ›åœ¨`IE11`ä¸Šæˆä¸ºäº†é—æ†¾ã€‚ä½†æ˜¯ğŸ‘€ï¼Œä¹Ÿæœ‰å¦ä¸€ç§ä¸æ€ä¹ˆä¼˜é›…çš„æ–¹æ¡ˆæ¥æä¾›æœ‰é™çš„èƒ½åŠ›ã€‚

å› ä¸ºæ‰€æœ‰çš„è¿™äº›`icons`éƒ½æ˜¯åŸºäº[iconify](https://iconify.design/)è¿™ä¸ªå›¾æ ‡æ¡†æ¶çš„å›¾æ ‡é›†[icon-sets](https://github.com/iconify/icon-sets)ï¼Œå…¶åº•å±‚éƒ½æ˜¯ä½¿ç”¨çš„`svg`æ¥æ¸²æŸ“ï¼Œå¹¶ä¸”æä¾›äº†è¿™äº›`svg`çš„`URL`[icones.js.org](https://icones.js.org/)ï¼Œæˆ‘ä»¬å°±èƒ½æ‹¿åˆ°æƒ³è¦ä½¿ç”¨çš„å›¾æ ‡çš„`URL`æˆ–è€…`Data URL`ï¼Œåˆ¤æ–­å½“å‰æµè§ˆå™¨å¦‚æœæ˜¯`IE`ï¼Œå°±ç”¨`background-image`çš„æ–¹æ¡ˆæ¥ä½¿ç”¨å›¾æ ‡ï¼Œé€šè¿‡æŒ‡å®šå…ƒç´ å®½é«˜ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿå®ç°ï¼Œç»„ä»¶å¤§æ¦‚é€»è¾‘ï¼š
```html
<div :class="isIE ? `w-${size} h-${size}` : ''" display-context inline-block text-center>
  <div v-if="isIE" :class="`w-${size} h-${size}`" :style="{ backgroundImage: `url(${Icons[name]})`, backgroundSize: '100% 100%' }" />
  <div v-else :class="`${IconName[name]} text-${size}`" inline-block />
</div>
```
å…·ä½“ä»£ç [å‚è€ƒ](https://github.com/luvletterldl/the-last-naruto/blob/main/src/components/icons/CarbonIcon.vue)ã€‚
é—æ†¾çš„ä¸€ç‚¹å°±æ˜¯**å›¾æ ‡é¢œè‰²çš„è®¾ç½®**è¿˜æ²¡æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ¡ˆï¼Œå¦‚æœä½ æœ‰æ¯”è¾ƒå¥½çš„é¢œè‰²æ”¹å˜æ–¹æ¡ˆï¼Œæ¬¢è¿`PR`!

### CSS Variables Polyfill

æ„Ÿè°¢[ie11CustomProperties](https://github.com/nuxodin/ie11CustomProperties)çš„æ”¯æŒï¼Œåªåœ¨`IE11`æµè§ˆå™¨ç¯å¢ƒä¸ŠåŠ è½½ä¸€æ®µ`polyfill`æ¥æ”¯æŒ`css var`ã€‚

## ä½¿ç”¨
```bash
npx degit luvletterldl/the-last-naruto your-project-name
cd your-project-name
pnpm i # If you don't have pnpm installed, run: npm install -g pnpm
```

## æ€»ç»“

é•¿æ±Ÿåæµªæ¨å‰æµªï¼Œå‰ç«¯åœˆé‡Œé¢æ›´æ˜¯å¦‚æ­¤ã€‚`Vue`å›¢é˜Ÿåœ¨æ‰“ç£¨äº†å¥½äº†`Vue3`ç”Ÿæ€ä¹‹åï¼Œå¹¶æ²¡æœ‰é€‰æ‹©æŠŠ`Vue2`"æ‹æ­»åœ¨æ²™æ»©ä¸Š"ã€‚ä¾ç„¶å¯¹`Vue2`ä¿æŒåˆå¿ƒï¼Œä¸ºæˆ‘ä»¬å¼€å‘è€…ç²¾å¿ƒå‡†å¤‡äº†`Vue2.7`è¿™æ ·çš„ä¼ å¥‡ç‰ˆæœ¬ã€‚å°±åƒä»–çš„ä»£å·`Naruto`ä¸€æ ·ã€‚

> åªè¦æœ‰æ ‘å¶é£èˆçš„åœ°æ–¹å°±ä¼šæœ‰ç«åœ¨ç‡ƒçƒ§ï¼Œç«çš„å½±å­ç…§è€€ç€æ‘å­ï¼Œç„¶åæ–°çš„æ ‘å¶ä¼šå†æ¬¡èŒèŠ½

æœ€åï¼Œä¹Ÿå¸Œæœ›[the-last-naruto](https://github.com/luvletterldl/the-last-naruto)èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ï¼Œä½¿ç”¨æœ‰ä»»ä½•é—®é¢˜ä¹Ÿå¯ä»¥ç»™æˆ‘è¯„è®ºæˆ–è€…æ[issue](https://github.com/luvletterldl/the-last-naruto/issues/new)ï¼Œå¦‚æœæœ‰å¥½çš„å»ºè®®ä¹Ÿæ¬¢è¿`PR`ï¼æœ‰ç”¨è¯·ç‚¹èµï¼ˆé¡ºä¾¿ç»™ä¸ª`Star`ğŸ˜œï¼‰ï¼Œå–œæ¬¢è¯·å…³æ³¨ï¼Œæˆ‘æ˜¯`Senar`ã€‚
